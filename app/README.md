
# ğŸ“„ Contract AI Agent
<img width="1709" alt="ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2025-06-16 5 22 16" src="https://github.com/user-attachments/assets/f584c8dc-3f88-40e9-a157-8eae8cd100f9" />
<img width="1706" alt="ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2025-06-16 5 22 03" src="https://github.com/user-attachments/assets/86de3680-ed3b-45a4-9bc2-431062066eaa" />

AIã‚’æ´»ç”¨ã—ã¦ã€CLIä¸Šã§æ—¥æœ¬èªã®å¥‘ç´„æ›¸ï¼ˆè³ƒè²¸å¥‘ç´„æ›¸ãƒ»æ¥­å‹™å§”è¨—å¥‘ç´„æ›¸ï¼‰ã‚’è‡ªå‹•ç”Ÿæˆãƒ»PDFå‡ºåŠ›ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

---

## ğŸ”§ Features

- ğŸ¤– **è‡ªç„¶è¨€èªå…¥åŠ› â†’ GPTã§å¿…è¦é …ç›®æŠ½å‡º**
- ğŸ·ï¸ **å¥‘ç´„ã‚¿ã‚¤ãƒ—ã‚’è‡ªå‹•åˆ¤å®šï¼ˆè³ƒè²¸ / æ¥­å‹™å§”è¨—ï¼‰**
- ğŸ” **æ¬ è½é …ç›®ã¯è‡ªç„¶ãªæ—¥æœ¬èªã§ãƒ’ã‚¢ãƒªãƒ³ã‚°**
- ğŸ“„ **Jinja2ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§PDFå‡ºåŠ›**
- âœ… **ã‚¹ã‚­ãƒ¼ãƒãƒ™ãƒ¼ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ`.janicre`ï¼‰**
- ğŸŒ **`.apdf`å¯¾å¿œï¼šå…¨æ–‡æ¤œç´¢ï¼‹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯èƒ½ãªæ–°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**

---

## ğŸš€ Usage

### 1. Install

```bash
git clone https://github.com/yourname/contract-ai-agent.git
cd contract-ai-agent
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 2. Set API Key

`.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼š

```env
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### 3. Run CLI

```bash
python app/generate_interactive.py "æ ªå¼ä¼šç¤¾ABCã¯ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ¥­å‹™ã‚’å§”è¨—ã—ã¾ã™ã€‚å ±é…¬ã¯20ä¸‡å††ã§ã™ã€‚"
```

---

## ğŸ” æ¤œç´¢ãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆ`.apdf`ï¼‰

Flaskã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼š

```bash
python app/server.py
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãï¼š

[http://localhost:5000/static/index.html](http://localhost:5000/static/index.html)

- `.apdf`ã®å…¨æ–‡æ¤œç´¢
- ã‚¯ãƒªãƒƒã‚¯ã§å³PDFãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

---

## ğŸ“¦ `.apdf`ã¨ã¯ï¼Ÿ
<img width="824" alt="ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2025-06-16 2 03 07" src="https://github.com/user-attachments/assets/318e3a24-ea9a-4ea6-946e-74456985bde4" />

- ğŸ§¾ PDFãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ä¿æŒ
- ğŸ” æ§‹é€ åŒ–ãƒ†ã‚­ã‚¹ãƒˆã§å…¨æ–‡æ¤œç´¢å¯¾å¿œ
- ğŸ§  AIã«ã‚ˆã‚‹çŸ¥è­˜ãƒ™ãƒ¼ã‚¹åŒ–ã«æœ€é©

---

## âš™ï¸ ä»•çµ„ã¿

```
+--------------------------------------------------------------+
|              ğŸŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ï¼ˆè‡ªç„¶æ–‡ï¼‰                     |
|  ä¾‹:ã€ŒABCæ ªå¼ä¼šç¤¾ã¯ã€XYZã«ã‚¢ãƒ‹ãƒ¡åˆ¶ä½œã‚’å§”è¨—ã€‚ã€             |
+--------------------------------------------------------------+
                               |
                               v
+--------------------------------------------------------------+
| ğŸ§  â‘  å¥‘ç´„ã‚¿ã‚¤ãƒ—ã®è‡ªå‹•åˆ¤å®šï¼ˆclassify_doc_typeï¼‰             |
| - GPT-4o ã«ã‚ˆã‚‹åˆ¤å®š: 'rental' or 'outsourcing'              |
| - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆã€Œå®¶è³ƒã€ç­‰ï¼‰ã§åˆ†é¡           |
+--------------------------------------------------------------+
                               |
                               v
+--------------------------------------------------------------+
| â‘¡ å¯¾å¿œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ»ã‚¹ã‚­ãƒ¼ãƒèª­ã¿è¾¼ã¿ï¼ˆ.tpl / .janicreï¼‰     |
| - rental â†’ rental_agreement.tpl / .janicre                   |
| - outsourcing â†’ outsourcing_agreement.tpl / .janicre         |
+--------------------------------------------------------------+
                               |
                               v
+--------------------------------------------------------------+
| â‘¢ åˆæœŸæƒ…å ±ã®æ§‹é€ åŒ–ï¼ˆgenerate_contract_contextï¼‰             |
| - OpenAI API ã§ context ã‚’ç”Ÿæˆï¼ˆkey-valueï¼‰å½¢å¼             |
+--------------------------------------------------------------+
                               |
                               v
+--------------------------------------------------------------+
| â‘£ janicre ã«ã‚ˆã‚‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨æ­£è¦åŒ–ï¼ˆvalidateï¼‰         |
| - schema ã«åŸºã¥ãæ¬ æãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŠ½å‡º                       |
+--------------------------------------------------------------+
                               |
           +-------------------+-------------------+
           |                                       |
           v                                       v
+-----------------------------+       +----------------------------------+
| â“ ä¸è¶³æƒ…å ±ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è³ªå•  |       | âœ… æƒ…å ±ãŒã™ã¹ã¦æƒã£ã¦ã„ã‚‹å ´åˆ       |
| - GPTã§ä¸å¯§ã«èãè¿”ã™æ–‡ç”Ÿæˆ |       | - contextã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«æµã—è¾¼ã‚€  |
| - å…¥åŠ›ã‚’å…ƒã«å†ç”Ÿæˆ          |       | - PDFã¨ã—ã¦å‡ºåŠ›ï¼ˆrender_contractï¼‰ |
+-----------------------------+       +----------------------------------+
           ^
           |
           +------ï¼ˆä¸è¶³ãŒã‚ã‚‹é™ã‚Šãƒ«ãƒ¼ãƒ—ï¼‰------------------+
---
#### ğŸ§  janicre ã®ä»•çµ„ã¿ï¼ˆç°¡æ˜“ç‰ˆï¼‰
```
janicreï¼ˆJapanese Natural Input Contract REquirementsï¼‰ã¯ã€
è‡ªç„¶è¨€èªã§ä¸ãˆã‚‰ã‚ŒãŸå¥‘ç´„æƒ…å ±ã‚’ æ§‹é€ åŒ–ã—ã¦æ¤œè¨¼ãƒ»è£œå®Œ ã™ã‚‹ãŸã‚ã®æœ€å°ã‚¹ã‚­ãƒ¼ãƒä»•æ§˜ã§ã™ã€‚
AIã«ã‚ˆã‚‹å¥‘ç´„æ›¸ä½œæˆã®ç²¾åº¦ã¨ä¿¡é ¼æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚Œã¾ã—ãŸã€‚

ğŸ”§ ç›®çš„
âœ… GPTãªã©ã®LLMãŒç”Ÿæˆã™ã‚‹ä¸å®šå½¢ãªJSONã‚’ãƒãƒªãƒ‡ãƒ¼ãƒˆï¼†æ­£è¦åŒ–ã™ã‚‹

âœ… å¥‘ç´„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«å¿…è¦ãªæ§‹é€ çš„ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ˜ç¤ºã™ã‚‹

âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã¨ã®ä¸è¶³é …ç›®ã‚’æ¤œå‡ºã—ã€è¿½åŠ è³ªå•ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹

ğŸ“¦ ã‚¹ã‚­ãƒ¼ãƒå®šç¾©å½¢å¼
.janicre æ‹¡å¼µå­ã‚’æŒã¤ JSON ãƒ•ã‚¡ã‚¤ãƒ«ã§å®šç¾©ã€‚ä»¥ä¸‹ã¯ä¾‹ã§ã™ï¼š

```
{
  "spec": "rental_agreement",
  "fields": [
    {
      "name": "property_address",
      "type": "string",
      "required": true,
      "aliases": ["ç‰©ä»¶ã®ä½æ‰€", "æ‰€åœ¨åœ°"]
    },
    {
      "name": "property_size",
      "type": "number",
      "required": true,
      "aliases": ["é¢ç©", "åºƒã•"]
    }
    // ä»¥é™ç•¥
  ]
}
```
[DOI]Okazaki, T. (2025). A Log-Scale, Reversible Semantic-Commit Manifest\\ for Multi-Agent Software Reasoning [Zenodo]. https://doi.org/10.5281/zenodo.15466186
#### ğŸ¯ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å±æ€§
å±æ€§å	èª¬æ˜
name	ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¸Šã§ã®æ­£å¼ãªã‚­ãƒ¼åï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«æµã—è¾¼ã¾ã‚Œã‚‹ï¼‰
type	string / number / boolean ã®ã„ãšã‚Œã‹
required	å¿…é ˆé …ç›®ã‹ã©ã†ã‹
aliases	è‡ªç„¶æ–‡ã§ä½¿ã‚ã‚Œã‚‹ã“ã¨ãŒå¤šã„æ—¥æœ¬èªè¡¨ç¾ï¼ˆGPTè£œå®Œãƒ»ç…§åˆã«ä½¿ç”¨ï¼‰

#### ğŸ”„ janicre ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼
normalize(json, schema)

ã‚¨ã‚¤ãƒªã‚¢ã‚¹åã®è£œæ­£ã‚„å‹è£œæ­£ã‚’è¡Œã„ã€å½¢å¼ã‚’æƒãˆã¾ã™ã€‚

validate(json, schema)

ã‚¹ã‚­ãƒ¼ãƒä¸Š required: true ã§å®šç¾©ã•ã‚ŒãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒåŸ‹ã¾ã£ã¦ã„ã‚‹ã‹æ¤œæŸ»ã—ã¾ã™ã€‚

æœªå…¥åŠ›ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒªã‚¹ãƒˆã§è¿”ã—ã¾ã™ï¼ˆå¾Œç¶šã®è³ªå•ç”Ÿæˆã«ä½¿ç”¨ï¼‰ã€‚


---

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
.
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ ai_openai.py
â”‚   â”œâ”€â”€ render.py
â”‚   â”œâ”€â”€ generate_interactive.py
â”‚   â”œâ”€â”€ janicre_schema.py
â”‚   â””â”€â”€ templates/
â”‚       â”œâ”€â”€ rental_agreement.tpl
â”‚       â””â”€â”€ outsourcing_agreement.tpl
â”œâ”€â”€ schemas/
â”‚   â”œâ”€â”€ rental_agreement.janicre.json
â”‚   â””â”€â”€ outsourcing_agreement.janicre.json
â”œâ”€â”€ output/
â”‚   â””â”€â”€ *.pdf
â””â”€â”€ README.md
```

---

## ğŸ”¤ ã‚¹ã‚­ãƒ¼ãƒå½¢å¼ï¼ˆä¾‹ï¼š`.janicre`ï¼‰

```json
{
  "spec": "outsourcing_agreement",
  "fields": [
    {
      "name": "client_name",
      "type": "string",
      "required": true,
      "aliases": ["ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå", "ä¾é ¼è€…"]
    }
  ]
}
```

---

## ğŸ¤– ä½¿ç”¨æŠ€è¡“

- Python 3.9+
- OpenAI GPT-4o
- Jinja2
- WeasyPrint
- Flask
- `.janicre` ã‚¹ã‚­ãƒ¼ãƒå½¢å¼
- `.apdf` æ‹¡å¼µå­ï¼ˆå…¨æ–‡æ¤œç´¢ï¼‹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çµ±åˆï¼‰

---

## ğŸ“¬ ä»Šå¾Œã®å±•æœ›

- CLIã§ã®å¥‘ç´„ã‚¿ã‚¤ãƒ—é¸æŠã‚ªãƒ—ã‚·ãƒ§ãƒ³
- PDFã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼ˆå°é‘‘ãƒ»ãƒ•ã‚©ãƒ³ãƒˆç­‰ï¼‰
- è‹±èªå¯¾å¿œã€Wordå‡ºåŠ›å¯¾å¿œ

---

## ğŸ‘¤ ä½œè€…

**å²¡å´ å‹å“‰ï¼ˆTomoya Okazakiï¼‰**  
ğŸ“§ [tomoya@anime-create.com](mailto:tomoya@anime-create.com)  
ğŸŒ [https://anime-create.com](https://anime-create.com)
