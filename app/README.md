
# ğŸ“„ Contract AI Agent

AIã‚’æ´»ç”¨ã—ã¦ã€CLIä¸Šã§æ—¥æœ¬èªã®å¥‘ç´„æ›¸ï¼ˆè³ƒè²¸å¥‘ç´„æ›¸ãƒ»æ¥­å‹™å§”è¨—å¥‘ç´„æ›¸ï¼‰ã‚’è‡ªå‹•ç”Ÿæˆãƒ»PDFå‡ºåŠ›ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

---

## ğŸ”§ Features

- ğŸ¤– **è‡ªç„¶è¨€èªå…¥åŠ› â†’ GPTã§å¿…è¦é …ç›®æŠ½å‡º**
- ğŸ·ï¸ **å¥‘ç´„ã‚¿ã‚¤ãƒ—ã‚’è‡ªå‹•åˆ¤å®šï¼ˆè³ƒè²¸ / æ¥­å‹™å§”è¨—ï¼‰**
- ğŸ” **æ¬ è½é …ç›®ã¯è‡ªç„¶ãªæ—¥æœ¬èªã§ãƒ’ã‚¢ãƒªãƒ³ã‚°**
- ğŸ“„ **Jinja2ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§PDFå‡ºåŠ›**
- âœ… **ã‚¹ã‚­ãƒ¼ãƒãƒ™ãƒ¼ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ`.janicre`ï¼‰**
- ğŸŒ **`.apdf`å¯¾å¿œï¼šå…¨æ–‡æ¤œç´¢ï¼‹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯èƒ½ãªæ–°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**

---

## ğŸš€ Usage

### 1. Install

```bash
git clone https://github.com/yourname/contract-ai-agent.git
cd contract-ai-agent
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 2. Set API Key

`.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼š

```env
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### 3. Run CLI

```bash
python app/generate_interactive.py "æ ªå¼ä¼šç¤¾ABCã¯ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ¥­å‹™ã‚’å§”è¨—ã—ã¾ã™ã€‚å ±é…¬ã¯20ä¸‡å††ã§ã™ã€‚"
```

---

## ğŸ” æ¤œç´¢ãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆ`.apdf`ï¼‰

Flaskã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼š

```bash
python app/server.py
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãï¼š

[http://localhost:5000/static/index.html](http://localhost:5000/static/index.html)

- `.apdf`ã®å…¨æ–‡æ¤œç´¢
- ã‚¯ãƒªãƒƒã‚¯ã§å³PDFãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

---

## ğŸ“¦ `.apdf`ã¨ã¯ï¼Ÿ

- ğŸ§¾ PDFãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ä¿æŒ
- ğŸ” æ§‹é€ åŒ–ãƒ†ã‚­ã‚¹ãƒˆã§å…¨æ–‡æ¤œç´¢å¯¾å¿œ
- ğŸ§  AIã«ã‚ˆã‚‹çŸ¥è­˜ãƒ™ãƒ¼ã‚¹åŒ–ã«æœ€é©

---

## âš™ï¸ ä»•çµ„ã¿

```plaintext
ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ï¼ˆè‡ªç„¶æ–‡ï¼‰
     â†“
å¥‘ç´„ã‚¿ã‚¤ãƒ—ã®è‡ªå‹•åˆ¤å®šï¼ˆGPTã¾ãŸã¯ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼‰
     â†“
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã‚¹ã‚­ãƒ¼ãƒã®èª­ã¿è¾¼ã¿
     â†“
OpenAIã§åˆæœŸæƒ…å ±ã‚’æ§‹é€ åŒ–
     â†“
janicreã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»æ­£è¦åŒ–
     â†“
ä¸è¶³é …ç›®ãŒã‚ã‚Œã°è‡ªç„¶æ–‡ã§ãƒ’ã‚¢ãƒªãƒ³ã‚°
     â†“
ã™ã¹ã¦æƒãˆã°PDFå‡ºåŠ›ï¼ˆJinja2 + WeasyPrintï¼‰
```
+--------------------------------------------------------------+
|              ğŸŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ï¼ˆè‡ªç„¶æ–‡ï¼‰                     |
|  ä¾‹:ã€ŒABCæ ªå¼ä¼šç¤¾ã¯ã€XYZã«ã‚¢ãƒ‹ãƒ¡åˆ¶ä½œã‚’å§”è¨—ã€‚ã€             |
+--------------------------------------------------------------+
                               |
                               v
+--------------------------------------------------------------+
| ğŸ§  â‘  å¥‘ç´„ã‚¿ã‚¤ãƒ—ã®è‡ªå‹•åˆ¤å®šï¼ˆclassify_doc_typeï¼‰             |
| - GPT-4o ã«ã‚ˆã‚‹åˆ¤å®š: 'rental' or 'outsourcing'              |
| - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆã€Œå®¶è³ƒã€ç­‰ï¼‰ã§åˆ†é¡           |
+--------------------------------------------------------------+
                               |
                               v
+--------------------------------------------------------------+
| â‘¡ å¯¾å¿œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ»ã‚¹ã‚­ãƒ¼ãƒèª­ã¿è¾¼ã¿ï¼ˆ.tpl / .janicreï¼‰     |
| - rental â†’ rental_agreement.tpl / .janicre                   |
| - outsourcing â†’ outsourcing_agreement.tpl / .janicre         |
+--------------------------------------------------------------+
                               |
                               v
+--------------------------------------------------------------+
| â‘¢ åˆæœŸæƒ…å ±ã®æ§‹é€ åŒ–ï¼ˆgenerate_contract_contextï¼‰             |
| - OpenAI API ã§ context ã‚’ç”Ÿæˆï¼ˆkey-valueï¼‰å½¢å¼             |
+--------------------------------------------------------------+
                               |
                               v
+--------------------------------------------------------------+
| â‘£ janicre ã«ã‚ˆã‚‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨æ­£è¦åŒ–ï¼ˆvalidateï¼‰         |
| - schema ã«åŸºã¥ãæ¬ æãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŠ½å‡º                       |
+--------------------------------------------------------------+
                               |
           +-------------------+-------------------+
           |                                       |
           v                                       v
+-----------------------------+       +----------------------------------+
| â“ ä¸è¶³æƒ…å ±ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è³ªå•  |       | âœ… æƒ…å ±ãŒã™ã¹ã¦æƒã£ã¦ã„ã‚‹å ´åˆ       |
| - GPTã§ä¸å¯§ã«èãè¿”ã™æ–‡ç”Ÿæˆ |       | - contextã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«æµã—è¾¼ã‚€  |
| - å…¥åŠ›ã‚’å…ƒã«å†ç”Ÿæˆ          |       | - PDFã¨ã—ã¦å‡ºåŠ›ï¼ˆrender_contractï¼‰ |
+-----------------------------+       +----------------------------------+
           ^
           |
           +------ï¼ˆä¸è¶³ãŒã‚ã‚‹é™ã‚Šãƒ«ãƒ¼ãƒ—ï¼‰------------------+
---

## ğŸ§  janicre ã®ä»•çµ„ã¿ï¼ˆç°¡æ˜“ç‰ˆï¼‰

1. **ã‚¹ã‚­ãƒ¼ãƒèª­ã¿è¾¼ã¿**
   ```python
   schema = load_schema("rental_agreement.janicre")
   ```

2. **æ­£è¦åŒ–ï¼ˆNormalizeï¼‰**
   - ã€Œå¥‘ç´„é–‹å§‹æ—¥ã€â†’ `start_date` ãªã©ã«å¤‰æ›

3. **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆValidateï¼‰**
   - å¿…é ˆé …ç›®ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

4. **ä¸è¶³é …ç›®ã®è³ªå•æ–‡ç”Ÿæˆ**

5. **ãƒ«ãƒ¼ãƒ—å†ç”Ÿæˆ**
   - å…¥åŠ›ãŒå®Œå…¨ã«ãªã‚‹ã¾ã§ç¹°ã‚Šè¿”ã—

6. **PDFå‡ºåŠ›**
   ```python
   render_contract(template, context, output_path)
   ```

---

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
.
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ ai_openai.py
â”‚   â”œâ”€â”€ render.py
â”‚   â”œâ”€â”€ generate_interactive.py
â”‚   â”œâ”€â”€ janicre_schema.py
â”‚   â””â”€â”€ templates/
â”‚       â”œâ”€â”€ rental_agreement.tpl
â”‚       â””â”€â”€ outsourcing_agreement.tpl
â”œâ”€â”€ schemas/
â”‚   â”œâ”€â”€ rental_agreement.janicre.json
â”‚   â””â”€â”€ outsourcing_agreement.janicre.json
â”œâ”€â”€ output/
â”‚   â””â”€â”€ *.pdf
â””â”€â”€ README.md
```

---

## ğŸ”¤ ã‚¹ã‚­ãƒ¼ãƒå½¢å¼ï¼ˆä¾‹ï¼š`.janicre`ï¼‰

```json
{
  "spec": "outsourcing_agreement",
  "fields": [
    {
      "name": "client_name",
      "type": "string",
      "required": true,
      "aliases": ["ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå", "ä¾é ¼è€…"]
    }
  ]
}
```

---

## ğŸ¤– ä½¿ç”¨æŠ€è¡“

- Python 3.9+
- OpenAI GPT-4o
- Jinja2
- WeasyPrint
- Flask
- `.janicre` ã‚¹ã‚­ãƒ¼ãƒå½¢å¼
- `.apdf` æ‹¡å¼µå­ï¼ˆå…¨æ–‡æ¤œç´¢ï¼‹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çµ±åˆï¼‰

---

## ğŸ“¬ ä»Šå¾Œã®å±•æœ›

- CLIã§ã®å¥‘ç´„ã‚¿ã‚¤ãƒ—é¸æŠã‚ªãƒ—ã‚·ãƒ§ãƒ³
- PDFã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼ˆå°é‘‘ãƒ»ãƒ•ã‚©ãƒ³ãƒˆç­‰ï¼‰
- è‹±èªå¯¾å¿œã€Wordå‡ºåŠ›å¯¾å¿œ

---

## ğŸ‘¤ ä½œè€…

**å²¡å´ å‹å“‰ï¼ˆTomoya Okazakiï¼‰**  
ğŸ“§ [tomoya@anime-create.com](mailto:tomoya@anime-create.com)  
ğŸŒ [https://anime-create.com](https://anime-create.com)
